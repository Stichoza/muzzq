/*! muzzq 18-01-2014 */
function YouTube(){this.video={id:null,title:null,duration:0,currentTime:0,startByte:0,bytesTotal:0,bytesLoaded:0},this.instance=null}function onYouTubePlayerReady(a){console.log("YouTube Player loaded"+(a?": "+a:"")),yt.instance=document.getElementById("xyoutube"),yt.instance.addEventListener("onStateChange",yt.onStateChange)}YouTube.prototype.initYouTube=function(a){var b="http://www.youtube.com/apiplayer?enablejsapi=1&version=3",c=a||"youtube",d={allowScriptAccess:"always"},e={id:"xyoutube"};swfobject.embedSWF(b,c,"425","356","8",null,null,d,e),setTimeout(function(){console.log($(".fc-panel")),$(".fc-panel").click()},100)},YouTube.prototype.playSearched=function(a,b,c){var d=b||0,e=c||0;this.instance.loadPlaylist({list:a,listType:"search",index:d,startSeconds:e})},YouTube.prototype.onStateChange=function(a){console.log("Player state changed: "+a)};var LastFm={api:{key:"bd044519c318454f28ef92d641f7e55f",url:"http://ws.audioscrobbler.com/2.0/"},basicAjax:function(a,b){b.method=a,b.format="json",b.api_key=this.api.key;var c={url:this.api.url,method:"GET",data:b,async:!0,cache:!1,success:function(a){console.log(a)},error:function(a){console.warn(a)}};c=$.extend(c,b||{}),$.ajax(c)},searchArtist:function(){$.ajax()}},yt=new YouTube;yt.initYouTube("youtube-ninja"),$("#artist").typeahead({name:"artists",remote:{cache:!0,url:LastFm.api.url+"?method=artist.search&format=json&api_key="+LastFm.api.key+"&artist=%QUERY&limit=5",filter:function(a){var b=[];return $.each(a.results.artistmatches.artist,function(a,c){b.push({name:c.name,listeners:c.listeners,mbid:c.mbid,thumb:c.image&&""!=c.image[1]["#text"]?c.image[1]["#text"]:"//placehold.it/42x42",image:c.image&&""!=c.image[3]["#text"]?c.image[3]["#text"]:"none"})}),b}},template:['<div class="pull-left clearfix thumbnail tt-artist-img" ','style="background-image:url({{thumb}})"></div>','<span class="tt-artist-name">{{name}}</span>'].join(""),valueKey:"name",engine:Hogan}),$("#artist").on("typeahead:selected",function(a,b){console.log(b),"none"!=b.image&&$(this).addClass("tt-selected").css({"background-image":"url("+b.image+")"}),$("#track").focus()}).on("click focus mousedown",function(){$(this).removeClass("tt-selected").css({"background-image":"none"})}),$("#track").typeahead({name:"tracks",remote:{cache:!0,url:LastFm.api.url+"?method=track.search&format=json&api_key="+LastFm.api.key+"&track=%QUERY&artist=%ARTIST&limit=5"+$("#artist").val(),filter:function(a){var b=[];return $.each(a.results.trackmatches.track,function(a,c){b.push({name:c.name,artist:c.artist,mbid:c.mbid,listeners:c.listeners,thumb:c.image&&""!=c.image[1]["#text"]?c.image[1]["#text"]:"//placehold.it/42x42",image:c.image&&""!=c.image[3]["#text"]?c.image[3]["#text"]:"none"})}),b},replace:function(a,b){return a=a.replace("%ARTIST",$("#artist").val()),a.replace("%QUERY",b)}},template:['<div class="pull-left clearfix thumbnail tt-track-img" ','style="background-image:url({{thumb}})"></div>','<span class="tt-track-name">{{name}}</span>','<span class="tt-track-by-name">by <b>{{artist}}</b></span>'].join(""),valueKey:"name",engine:Hogan}),$("#track").on("typeahead:selected",function(a,b){console.log(b),"none"!=b.image&&$(this).addClass("tt-selected").css({"background-image":"url("+b.image+")"}),$("#listen button").focus()}).on("click focus mousedown",function(){$(this).removeClass("tt-selected").css({"background-image":"none"})}),$("#listen").submit(function(a){a.preventDefault(),yt.playSearched($("#artist").val()+" "+$("#track").val())});